streamlit-extras                       0.6.0

script_dir = os.path.dirname(os.path.abspath(__file__))
css_path = os.path.join(script_dir, "assets", "styles.css")

utils -> .utils



SUBSYSTEMS=="usb", ATTRS{idVendor}=="0781", ATTRS{idProduct}=="5571", ENV{ID_DRIVE_FLASH_SD}="1", ENV{ID_DRIVE_FLASH}="1", ENV{ID_USB_DRIVER}="usb-storage"
madhekar@madhekar-UM690:~/work/vision$ sudo chmod 0666 /etc/udev/rules.d/99-force-mass-storage.rules 
madhekar@madhekar-UM690:~/work/vision$ sudo vi /etc/udev/rules.d/99-force-mass-storage.rules
madhekar@madhekar-UM690:~/work/vision$ sudo udevadm control --reload-rules
madhekar@madhekar-UM690:~/work/vision$ sudo udevadm trigger

I think I solved this, at least for my machine. Lone_Wolf's suggestion about the fast boot possibly being an issue got me to poking around my bios a bit more. Under "Advanced CPU" I found another boot setting called "Boot performance mode" that was set to "Turbo" - what exactly that means I don't know. The little info box says that "Boot Performance Mode" is used to "Select the performance state that the BIOS will set before OS handoff" - again, not really clear what that means.

However, switching it from "Turbo" to "Max Non-Turbo Performance" has (so far) solved this problem. Not sure if it's just a coincidence and this will crop up again, but so far after several reboots I haven't had the described issue occur again. It's still not clear to me why this issue started all of the sudden, as I haven't made any changes to my bios settings in many months.

If anyone has any insight to what these settings are actually doing I'd be interested to know (brief googling hasn't turned up much). Asus Z87 Pro mobo, if that's relevant. 


madhekar@madhekar-UM690:~/work/vision$ sudo fstrim -av
/home: 520.1 GiB (558492491776 bytes) trimmed on /dev/nvme0n1p7
/boot/efi: 33.5 MiB (35129344 bytes) trimmed on /dev/nvme0n1p1
/: 3.1 GiB (3316772864 bytes) trimmed on /dev/nvme0n1p5



sudo /etc/init.d/udev stop 
sudo udevadm control --reload-rules 
sudo /etc/init.d/udev start

madhekar@madhekar-UM690:~/work/vision$ udevadm monitor --udev


madhekar@madhekar-UM690:~/work/vision$ inxi -Fzxxx
System:
  Kernel: 5.15.0-168-generic x86_64 bits: 64 compiler: gcc v: 11.4.0
    Desktop: Cinnamon 6.0.4 tk: GTK 3.24.33 wm: muffin dm: LightDM 1.30.0
    Distro: Linux Mint 21.3 Virginia base: Ubuntu 22.04 jammy
Machine:
  Type: Desktop System: Micro (HK) Tech product: UM690 v: Version 1.0
    serial: <superuser required>
  Mobo: Shenzhen Meigao Equipment model: F7BFC v: Version 1.0
    serial: <superuser required> UEFI: American Megatrends LLC. v: 1.16
    date: 02/15/2023
Battery:
  Device-1: hidpp_battery_1 model: Logitech Wireless Keyboard
    serial: <filter> charge: 55% (should be ignored) rechargeable: yes
    status: Discharging
CPU:
  Info: 8-core model: AMD Ryzen 9 6900HX with Radeon Graphics bits: 64
    type: MT MCP smt: enabled arch: Zen 3 rev: 1 cache: L1: 512 KiB L2: 4 MiB
    L3: 16 MiB
  Speed (MHz): avg: 1698 high: 2073 min/max: 1600/4935 boost: enabled
    cores: 1: 1337 2: 1395 3: 2053 4: 2052 5: 2064 6: 2058 7: 1872 8: 1518
    9: 2073 10: 2058 11: 1395 12: 1397 13: 1397 14: 1397 15: 1397 16: 1714
    bogomips: 105400
  Flags: avx avx2 ht lm nx pae sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 svm
Graphics:
  Device-1: AMD Rembrandt [Radeon 680M] driver: amdgpu v: kernel pcie:
    speed: 16 GT/s lanes: 16 ports: active: HDMI-A-2
    empty: DP-1, DP-2, DP-3, DP-4, DP-5, HDMI-A-1 bus-ID: 35:00.0
    chip-ID: 1002:1681 class-ID: 0300
  Display: x11 server: X.Org v: 1.21.1.4 driver: X: loaded: amdgpu,ati
    unloaded: fbdev,modesetting,vesa gpu: amdgpu display-ID: :0 screens: 1
  Screen-1: 0 s-res: 3840x2160 s-dpi: 96 s-size: 1016x571mm (40.0x22.5")
    s-diag: 1165mm (45.9")
  Monitor-1: HDMI-A-1 mapped: HDMI-A-2 model: Dell P2715Q serial: <filter>
    res: 3840x2160 hz: 30 dpi: 163 size: 597x336mm (23.5x13.2")
    diag: 685mm (27") modes: max: 3840x2160 min: 720x400
  OpenGL:
    renderer: REMBRANDT (rembrandt LLVM 15.0.7 DRM 3.42 5.15.0-168-generic)
    v: 4.6 Mesa 23.2.1-1ubuntu3.1~22.04.3 direct render: Yes
Audio:
  Device-1: AMD Radeon High Definition Audio [Rembrandt/Strix]
    driver: snd_hda_intel v: kernel pcie: speed: 16 GT/s lanes: 16
    bus-ID: 35:00.1 chip-ID: 1002:1640 class-ID: 0403
  Device-2: AMD Audio Coprocessor driver: snd_pci_acp6x v: kernel pcie:
    speed: 16 GT/s lanes: 16 bus-ID: 35:00.5 chip-ID: 1022:15e2 class-ID: 0480
  Device-3: AMD Family 17h/19h/1ah HD Audio vendor: Realtek
    driver: snd_hda_intel v: kernel pcie: speed: 16 GT/s lanes: 16
    bus-ID: 35:00.6 chip-ID: 1022:15e3 class-ID: 0403
  Sound Server-1: ALSA v: k5.15.0-168-generic running: yes
  Sound Server-2: PulseAudio v: 15.99.1 running: yes
  Sound Server-3: PipeWire v: 0.3.48 running: yes
Network:
  Device-1: Intel Ethernet I226-V driver: igc v: kernel pcie: speed: 5 GT/s
    lanes: 1 port: N/A bus-ID: 02:00.0 chip-ID: 8086:125c class-ID: 0200
  IF: eno1 state: up speed: 1000 Mbps duplex: full mac: <filter>
  Device-2: MEDIATEK MT7921 802.11ax PCI Express Wireless Network Adapter
    driver: N/A pcie: speed: 5 GT/s lanes: 1 bus-ID: 03:00.0 chip-ID: 14c3:7961
    class-ID: 0280
  IF-ID-1: docker0 state: down mac: <filter>
Bluetooth:
  Device-1: MediaTek Wireless_Device type: USB driver: btusb v: 0.8
    bus-ID: 5-3:2 chip-ID: 0e8d:7961 class-ID: e001 serial: <filter>
  Report: hciconfig ID: hci0 rfk-id: 0 state: up address: <filter>
    bt-v: 3.0 lmp-v: 5.2 sub-v: 2311 hci-v: 5.2 rev: 919
Drives:
  Local Storage: total: 953.87 GiB used: 320.12 GiB (33.6%)
  ID-1: /dev/nvme0n1 vendor: Kingston model: OM8PGP41024Q-A0
    size: 953.87 GiB speed: 63.2 Gb/s lanes: 4 type: SSD serial: <filter>
    rev: ELFK0S.6 temp: 29.9 C scheme: GPT
Partition:
  ID-1: / size: 19.53 GiB used: 16.36 GiB (83.8%) fs: ext4
    dev: /dev/nvme0n1p5
  ID-2: /boot/efi size: 96 MiB used: 62.5 MiB (65.1%) fs: vfat
    dev: /dev/nvme0n1p1
  ID-3: /home size: 823.96 GiB used: 303.69 GiB (36.9%) fs: ext4
    dev: /dev/nvme0n1p7
Swap:
  ID-1: swap-1 type: partition size: 3.14 GiB used: 0 KiB (0.0%) priority: -2
    dev: /dev/nvme0n1p6
Sensors:
  System Temperatures: cpu: N/A mobo: N/A gpu: amdgpu temp: 41.0 C
  Fan Speeds (RPM): N/A
Info:
  Processes: 422 Uptime: 5h 11m wakeups: 19 Memory: 60.56 GiB
  used: 5.07 GiB (8.4%) Init: systemd v: 249 runlevel: 5 Compilers:
  gcc: 11.4.0 alt: 11/12 Packages: 2631 apt: 2624 flatpak: 7 Shell: Bash
  v: 5.1.16 running-in: gnome-terminal inxi: 3.3.13
